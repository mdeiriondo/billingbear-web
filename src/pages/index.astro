---
import Layout from '../layouts/Layout.astro';
import WeatherWidget from '../components/WeatherWidget';
import PurchaseButton from '../components/PurchaseButton';
import { getVouchers, getCourseStatus } from '../lib/wp';
import { Image } from 'astro:assets';
import heroImage from '../assets/images/heroBBP.webp';

// Fetch de datos reales desde WordPress
const allVouchers = await getVouchers();

// Lógica de Negocio: Filtramos los 5 que irán a la Home
const homeVouchers = allVouchers
  .sort((a: any, b: any) => {
    const aHasWooId = !!a.acf?.woo_product_id;
    const bHasWooId = !!b.acf?.woo_product_id;
    if (aHasWooId && !bHasWooId) return -1;
    if (!aHasWooId && bHasWooId) return 1;
    if (aHasWooId && bHasWooId) {
      return (b.acf?.is_featured ? 1 : 0) - (a.acf?.is_featured ? 1 : 0);
    }
    return b.acf?.is_featured ? 1 : -1;
  })
  .slice(0, 5);

const statusData = {
  old: {
    label: 'Old Course',
    status: 'Open',
    color: 'bg-green-400',
    details: 'Full 18 holes playable. No restrictions.',
  },
  new: {
    label: 'New Course',
    status: 'Restricted',
    color: 'bg-yellow-400',
    details: 'Mats only. No buggies today.',
  },
};

const getImageUrl = (v: any) =>
  v._embedded?.['wp:featuredmedia']?.[0]?.source_url ||
  'https://images.pexels.com/photos/274133/pexels-photo-274133.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1';

// ASSETS
const logoUrl = 'https://billingbearpark.com/wp-content/uploads/2020/10/cropped-treat2-2.png';
const shuffleboardImage =
  'https://images.pexels.com/photos/696218/pexels-photo-696218.jpeg?auto=compress&cs=tinysrgb&w=800';
const eventsImage =
  'https://images.pexels.com/photos/50675/banquet-wedding-society-deco-50675.jpeg?auto=compress&cs=tinysrgb&w=800';
const heritageImage =
  'https://images.pexels.com/photos/1632790/pexels-photo-1632790.jpeg?auto=compress&cs=tinysrgb&w=800';

const brsOldCourse = 'https://visitors.brsgolf.com/billingbearold#/course/1';
const brsNewCourse = 'https://visitors.brsgolf.com/billingbearshort#/course/1';
const shuffleBookingUrl =
  'https://billingbearpark.simplybook.it/v2/?widget-type=iframe&theme=minimal&timeline=modern&datepicker=top_calendar&sb_base_color=2d5016&btn_color_1=d4af37&link_color=2d5016&body_bg_color=ffffff&dark_font_color=1a1a1a&light_font_color=ffffff&sb_available=d4af37&sb_busy=cccccc#book/service/2/count/1/provider/2/';
---

<Layout title="Billingbear Park | Pay & Play Golf in Berkshire">
  <!-- 1. TOP BAR: COURSE STATUS (Fijamos altura para evitar CLS) -->
  <div
    id="top-bar"
    class="bg-brand-green text-white text-[10px] md:text-xs py-1.5 md:py-2 px-3 md:px-6 flex justify-between items-center tracking-widest uppercase border-b border-white/10 relative z-[110] transition-transform duration-500 whitespace-nowrap overflow-hidden min-h-[40px]"
  >
    <div class="flex gap-2 md:gap-6 lg:gap-10 items-center relative min-w-0 flex-1">
      <!-- Old Course Reveal -->
      <div class="course-group-old relative flex items-center cursor-default shrink-0">
        <div
          class={`flex items-center gap-1.5 md:gap-2 ${statusData.old.status !== 'Open' ? 'status-alert' : ''}`}
        >
          <span
            class={`w-1.5 md:w-2 h-1.5 md:h-2 rounded-full ${statusData.old.color} animate-pulse shrink-0`}
          ></span>
          <span class="font-bold"
            >{statusData.old.label}<span class="hidden md:inline"
              >: <span class="text-brand-gold">{statusData.old.status}</span></span
            ></span
          >
        </div>
        <div
          class="max-w-0 transition-all duration-500 ease-in-out overflow-hidden opacity-0 ml-3 whitespace-nowrap inline-block hidden md:block"
        >
          <span
            class="pl-4 text-[9px] text-white/60 normal-case tracking-tight font-light border-l border-white/10 inline-block"
          >
            {statusData.old.details}
          </span>
        </div>
      </div>

      <!-- New Course Reveal -->
      <div
        class="course-group-new relative flex items-center cursor-default shrink-0 border-l border-white/10 pl-2 md:pl-6 md:pl-10"
      >
        <div
          class={`flex items-center gap-1.5 md:gap-2 ${statusData.new.status !== 'Open' ? 'status-alert' : ''}`}
        >
          <span class={`w-1.5 md:w-2 h-1.5 md:h-2 rounded-full ${statusData.new.color} shrink-0`}
          ></span>
          <span class="font-bold"
            >{statusData.new.label}<span class="hidden md:inline"
              >: <span class="text-brand-gold">{statusData.new.status}</span></span
            ></span
          >
        </div>
        <div
          class="absolute left-full top-0 max-w-0 transition-all duration-500 ease-in-out overflow-hidden opacity-0 ml-3 whitespace-nowrap z-10 hidden md:block"
        >
          <span
            class="pl-4 text-[9px] text-white/60 normal-case tracking-tight font-light border-l border-white/10 inline-block"
          >
            {statusData.new.details}
          </span>
        </div>
      </div>
    </div>
    <div class="flex items-center gap-2 md:gap-4 lg:gap-6 shrink-0">
      <span
        class="hidden lg:inline opacity-40 font-serif italic text-sm normal-case tracking-normal"
      >
        Berkshire Heritage Golf: Making Quality Golf Accessible to Everyone
      </span>
      <WeatherWidget client:idle />
    </div>
  </div>

  <main>
    <!-- 3. HERO SECTION (Optimización de carga de imagen) -->
    <header
      class="relative h-[90vh] w-full overflow-hidden flex items-center justify-center group bg-brand-dark"
    >
      <nav
        id="main-nav"
        class="fixed top-0 w-full z-[100] px-4 md:px-6 transition-all duration-500 py-10 md:py-12 translate-y-8 min-h-[120px]"
      >
        <div class="nav-inner max-w-7xl mx-auto grid grid-cols-3 items-center relative">
          <div class="flex items-center gap-4 md:gap-8 shrink-0">
            <a href="/" class="block nav-logo transition-all duration-500 origin-left shrink-0">
              <img
                src={logoUrl}
                width="160"
                height="80"
                alt="Billingbear Park Golf Course"
                class="h-10 md:h-20 w-auto brightness-0 invert filter drop-shadow-md"
              />
            </a>

            <div
              class="nav-status hidden opacity-0 transition-all duration-500 items-center gap-6 border-l border-white/20 pl-6 h-8 whitespace-nowrap relative min-w-0"
            >
              <div class="nav-course-group-old relative flex items-center">
                <span class={`w-2 h-2 rounded-full ${statusData.old.color} shrink-0`}></span>
                <div
                  class={`flex flex-col ml-3 leading-tight ${statusData.old.status !== 'Open' ? 'status-alert' : ''}`}
                >
                  <span class="text-white text-[8px] font-bold uppercase tracking-widest"
                    >{statusData.old.label}</span
                  >
                  <span class="text-brand-gold text-[9px] font-bold uppercase"
                    >{statusData.old.status}</span
                  >
                </div>
                <div
                  class="max-w-0 transition-all duration-500 overflow-hidden opacity-0 hidden md:block ml-4 whitespace-nowrap inline-block"
                >
                  <span class="text-[9px] text-white/40 border-l border-white/10 pl-4"
                    >{statusData.old.details}</span
                  >
                </div>
              </div>

              <div
                class="nav-course-group-new relative flex items-center border-l border-white/10 pl-6"
              >
                <span class={`w-2 h-2 rounded-full ${statusData.new.color} shrink-0`}></span>
                <div
                  class={`flex flex-col ml-3 leading-tight ${statusData.new.status !== 'Open' ? 'status-alert' : ''}`}
                >
                  <span class="text-white text-[8px] font-bold uppercase tracking-widest"
                    >{statusData.new.label}</span
                  >
                  <span class="text-brand-gold text-[9px] font-bold uppercase"
                    >{statusData.new.status}</span
                  >
                </div>
                <div
                  class="absolute left-full top-0 max-w-0 transition-all duration-500 overflow-hidden opacity-0 hidden md:block ml-4 whitespace-nowrap z-10"
                >
                  <span class="text-[9px] text-white/40 border-l border-white/10 pl-4"
                    >{statusData.new.details}</span
                  >
                </div>
              </div>
            </div>
          </div>

          <div
            class="nav-links hidden md:flex gap-6 lg:gap-8 text-white text-sm font-medium tracking-wide shadow-black drop-shadow-md transition-all duration-500 justify-center"
          >
            <a
              href="#courses"
              class="hover:text-brand-gold transition-colors duration-300 whitespace-nowrap"
              >Our Courses</a
            >
            <a
              href="#heritage"
              class="hover:text-brand-gold transition-colors duration-300 whitespace-nowrap"
              >History</a
            >
            <a
              href="#vouchers"
              class="hover:text-brand-gold transition-colors duration-300 whitespace-nowrap"
              >Gift Vouchers</a
            >
            <a
              href="#social"
              class="hover:text-brand-gold transition-colors duration-300 whitespace-nowrap"
              >Shuffleboard</a
            >
            <a
              href="#events"
              class="hover:text-brand-gold transition-colors duration-300 whitespace-nowrap"
              >Events</a
            >
          </div>

          <div class="flex items-center gap-2 md:gap-3 shrink-0 justify-end">
            <button
              class="shuffle-trigger nav-shuffle hidden opacity-0 transform translate-x-4 transition-all duration-500 bg-transparent border border-white/40 text-white px-5 md:px-7 py-2.5 md:py-3 rounded-sm text-[10px] md:text-xs font-bold uppercase tracking-widest hover:bg-white hover:text-brand-green cursor-pointer whitespace-nowrap leading-none"
            >
              Shuffleboard
            </button>
            <button
              class="booking-trigger bg-white text-brand-green px-5 md:px-7 py-2.5 md:py-3 rounded-sm text-[10px] md:text-xs font-bold uppercase tracking-widest hover:bg-brand-gold transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5 transform cursor-pointer border border-white whitespace-nowrap leading-none"
            >
              Book Tee Time
            </button>
          </div>
        </div>
      </nav>

      <!-- HERO IMAGE: Optimizada con prioridad alta y dimensiones fijas -->
      <Image
        src={heroImage}
        alt="Billingbear Golf Course Lake View"
        width={1920}
        height={1080}
        format="webp"
        loading="eager"
        fetchpriority="high"
        sizes="100vw"
        class="absolute inset-0 w-full h-full object-cover"
      />

      <div class="absolute inset-0 bg-brand-green/20 mix-blend-multiply"></div>
      <div class="absolute inset-0 bg-black/30"></div>

      <div class="relative z-10 max-w-5xl mx-auto px-6 text-center mt-20">
        <h1
          class="hero-title text-4xl md:text-7xl text-white font-serif font-medium leading-[1.1] mb-6 drop-shadow-xl opacity-0 translate-y-8 animate-enter tracking-[0.04em] md:tracking-[0.06em]"
          style="animation-delay: 100ms;"
        >
          Welcome to <span class="text-brand-gold italic tracking-[0.08em]">Billingbear Park</span>
        </h1>
        <p
          class="hero-subtitle text-white text-base md:text-2xl font-light max-w-3xl mx-auto leading-relaxed drop-shadow-lg opacity-0 translate-y-8 animate-enter tracking-[0.02em]"
          style="animation-delay: 300ms;"
        >
          Pay and play golf in the heart of the beautiful Berkshire countryside.
        </p>

        <div
          class="flex flex-col sm:flex-row gap-4 justify-center mt-12 opacity-0 translate-y-8 animate-enter"
          style="animation-delay: 500ms;"
        >
          <button
            class="booking-trigger bg-brand-gold text-brand-green px-10 py-4 text-sm font-bold uppercase tracking-widest hover:bg-white transition-all duration-300 shadow-xl border border-brand-gold hover:shadow-2xl hover:-translate-y-1 cursor-pointer whitespace-nowrap"
          >
            Book a Tee Time
          </button>
          <a
            href="#notice-board"
            class="bg-brand-gold/80 backdrop-blur-md border border-white/30 text-white px-10 py-4 text-sm font-bold uppercase tracking-widest hover:bg-white hover:text-brand-green transition-all duration-300 hover:shadow-lg hover:-translate-y-1"
          >
            Player Info
          </a>
        </div>
      </div>
    </header>

    <!-- 4. THE CLUBHOUSE BOARD -->
    <section id="notice-board" class="relative -mt-24 z-20 px-4 md:px-6 pb-24 reveal scroll-mt-24">
      <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 min-h-[400px]">
        <!-- A. COLUMNA IZQUIERDA -->
        <div
          class="lg:col-span-2 bg-brand-cream border-t-4 border-brand-green shadow-2xl p-6 md:p-12 rounded-sm transform transition-all hover:shadow-3xl duration-500"
        >
          <div class="flex items-center gap-4 mb-8">
            <div class="p-3 bg-brand-green text-white rounded-full">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                ><path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg
              >
            </div>
            <h2 class="font-serif text-2xl md:text-3xl text-brand-green leading-tight italic">
              Golfers’ Information & Etiquette
            </h2>
          </div>

          <div class="space-y-6 md:space-y-8 text-brand-dark/80 leading-relaxed font-light">
            <div
              class="bg-white p-6 border-l-4 border-brand-gold shadow-sm hover:shadow-md transition-shadow duration-300"
            >
              <p class="font-bold text-brand-green mb-2 uppercase text-[10px] tracking-widest">
                Today's Conditions:
              </p>
              <p class="text-base md:text-lg">
                The courses are open. Due to wet conditions, please <strong
                  class="text-brand-dark bg-yellow-100 px-1 font-medium"
                  >tee the ball up on all full shots</strong
                > or use an astroturf mat.
              </p>
              <p class="text-xs mt-3 italic opacity-70 border-t border-brand-stone pt-2">
                Mats available in the clubhouse for £10 or bring your own.
              </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
              <div class="hover:bg-white p-4 -m-4 rounded transition-colors duration-300">
                <h4
                  class="font-bold text-brand-green uppercase text-[10px] tracking-widest mb-3 border-b border-brand-green/20 pb-1"
                >
                  Winter Wheels
                </h4>
                <p class="text-sm leading-relaxed">
                  Winter wheels are <strong>required on trollies</strong>. Hedgehog sleeves can be
                  purchased from the clubhouse and fitted to most wheels.
                </p>
              </div>
              <div class="hover:bg-white p-4 -m-4 rounded transition-colors duration-300">
                <h4
                  class="font-bold text-brand-green uppercase text-[10px] tracking-widest mb-3 border-b border-brand-green/20 pb-1"
                >
                  Buggy Rules
                </h4>
                <p class="text-sm leading-relaxed">
                  Buggies are permitted on the <strong>Old Course only</strong> and must stick to <strong
                    class="underline">paths only</strong
                  > at all times.
                </p>
              </div>
            </div>

            <div class="pt-4 border-t border-brand-stone">
              <h4 class="font-bold text-brand-green uppercase text-[10px] tracking-widest mb-2">
                Pace of Play
              </h4>
              <p class="text-sm leading-relaxed">
                Try to keep up with the group in front of you. If you can’t – please stand aside and
                call faster groups through.
              </p>
            </div>
          </div>
        </div>

        <!-- B. COLUMNA DERECHA: BUGGY HIRE FORM -->
        <div
          id="buggy"
          class="bg-brand-green text-white shadow-2xl p-6 md:p-10 rounded-sm flex flex-col justify-center relative overflow-hidden group"
        >
          <div
            class="absolute top-0 right-0 opacity-10 pointer-events-none transform translate-x-10 -translate-y-10 transition-transform duration-700 group-hover:rotate-12"
          >
            <svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"
              ><circle cx="100" cy="100" r="80" fill="white"></circle></svg
            >
          </div>

          <h3 class="font-serif text-2xl md:text-3xl mb-2 relative z-10 italic">Buggy Hire</h3>
          <p
            class="text-white/70 text-xs md:text-sm mb-6 relative z-10 border-b border-white/20 pb-4"
          >
            Reserve your buggy in advance.
          </p>

          <form class="space-y-3 relative z-10">
            <div class="grid grid-cols-2 gap-3">
              <input
                type="text"
                placeholder="First Name *"
                class="w-full bg-white/10 border border-white/20 rounded-sm p-3 text-sm placeholder-white/50 focus:outline-none focus:bg-white/20 focus:border-brand-gold transition-colors"
              />
              <input
                type="text"
                placeholder="Surname *"
                class="w-full bg-white/10 border border-white/20 rounded-sm p-3 text-sm placeholder-white/50 focus:outline-none focus:bg-white/20 focus:border-brand-gold transition-colors"
              />
            </div>
            <input
              type="email"
              placeholder="Email Address *"
              class="w-full bg-white/10 border border-white/20 rounded-sm p-3 text-sm placeholder-white/50 focus:outline-none focus:bg-white/20 focus:border-brand-gold transition-colors"
            />
            <input
              type="date"
              class="w-full bg-white/10 border border-white/20 rounded-sm p-3 text-sm text-white/80 focus:outline-none focus:bg-white/20 focus:border-brand-gold transition-colors"
            />

            <label
              class="flex items-start gap-3 text-[10px] text-white/80 mt-2 cursor-pointer hover:text-white transition-colors"
            >
              <input type="checkbox" class="mt-0.5 accent-brand-gold cursor-pointer" />
              <span>I confirm I am over 18 and accept the hire conditions.</span>
            </label>

            <button
              type="submit"
              class="w-full bg-brand-gold text-brand-green font-bold uppercase tracking-widest text-[10px] md:text-xs py-4 mt-4 hover:bg-white transition-all duration-300 shadow-lg border border-brand-gold hover:shadow-xl hover:-translate-y-0.5 transform leading-none"
            >
              Submit Request
            </button>
          </form>
        </div>
      </div>
    </section>

    <!-- 5. OUR COURSES (Lazy loading para imágenes secundarias) -->
    <section id="courses" class="py-24 px-6 bg-white reveal scroll-mt-20">
      <div class="max-w-7xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="font-serif text-4xl md:text-5xl text-brand-green mb-6 leading-tight italic">
            Our Courses
          </h2>
          <div class="w-20 h-px bg-brand-gold mx-auto"></div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-16">
          <!-- Old Course -->
          <a href="/courses/the-old-course" class="group block cursor-pointer">
            <div
              class="overflow-hidden mb-6 aspect-[16/10] relative shadow-lg rounded-sm bg-brand-stone"
            >
              <img
                src="https://images.pexels.com/photos/1325681/pexels-photo-1325681.jpeg?auto=compress&cs=tinysrgb&w=800"
                width="800"
                height="500"
                loading="lazy"
                decoding="async"
                alt="The Old Course"
                class="w-full h-full object-cover transition-transform duration-[1.5s] ease-out group-hover:scale-105"
              />
              <div
                class="absolute bottom-6 left-6 bg-brand-green text-white px-5 py-2 text-xs font-bold tracking-widest shadow-md"
              >
                18 HOLES
              </div>
            </div>
            <h3
              class="font-serif text-2xl md:text-3xl mb-3 text-brand-green group-hover:text-brand-gold transition-colors duration-300 italic"
            >
              The Old Course
            </h3>
            <p class="text-brand-dark/70 font-light leading-relaxed mb-6 text-base md:text-lg">
              Designed by Martin Hawtree. A true test of strategy winding through mature parkland
              and ancient woodland.
            </p>
            <span
              class="inline-flex items-center text-brand-green font-bold uppercase tracking-widest text-[10px] border-b-2 border-brand-gold pb-1 group-hover:text-brand-gold transition-all duration-300 leading-none"
              >Explore the Course &rarr;</span
            >
          </a>

          <!-- New Course -->
          <a href="/courses/the-new-course" class="group block cursor-pointer">
            <div
              class="overflow-hidden mb-6 aspect-[16/10] relative shadow-lg rounded-sm bg-brand-stone"
            >
              <img
                src="https://images.pexels.com/photos/274133/pexels-photo-274133.jpeg?auto=compress&cs=tinysrgb&w=800"
                width="800"
                height="500"
                loading="lazy"
                decoding="async"
                alt="The New Course"
                class="w-full h-full object-cover transition-transform duration-[1.5s] ease-out group-hover:scale-105"
              />
              <div
                class="absolute bottom-6 left-6 bg-brand-green text-white px-5 py-2 text-xs font-bold tracking-widest shadow-md"
              >
                9 HOLES PAR 3
              </div>
            </div>
            <h3
              class="font-serif text-2xl md:text-3xl mb-3 text-brand-green group-hover:text-brand-gold transition-colors duration-300 italic"
            >
              The New Course
            </h3>
            <p class="text-brand-dark/70 font-light leading-relaxed mb-6 text-base md:text-lg">
              A beautifully maintained par 3 course with water hazards. Perfect for beginners or
              sharpening your short game.
            </p>
            <span
              class="inline-flex items-center text-brand-green font-bold uppercase tracking-widest text-[10px] border-b-2 border-brand-gold pb-1 group-hover:text-brand-gold transition-all duration-300 leading-none"
              >Explore the Course &rarr;</span
            >
          </a>
        </div>
      </div>
    </section>

    <!-- 6. HERITAGE & HISTORY -->
    <section
      id="heritage"
      class="py-24 px-6 bg-brand-cream border-t border-brand-stone reveal scroll-mt-20"
    >
      <div class="max-w-7xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 md:gap-16 items-center">
          <div class="order-2 lg:order-1 relative">
            <div
              class="absolute -top-10 -left-10 w-32 h-32 border-t-2 border-l-2 border-brand-gold/30 rounded-tl-3xl hidden md:block"
            >
            </div>
            <span class="text-brand-gold uppercase tracking-widest text-[10px] font-bold"
              >1086 — Present Day</span
            >
            <h2
              class="font-serif text-3xl md:text-5xl text-brand-green mt-4 mb-8 leading-tight italic"
            >
              A Landscape Steeped in History
            </h2>

            <div
              class="space-y-6 text-brand-dark/80 font-light text-base md:text-lg leading-relaxed border-l border-brand-green/20 pl-6"
            >
              <p>
                From its first mention in the <strong>Domesday Book (1086)</strong> as part of the royal
                lands of King William, Billingbear has been home to royalty, Tudor nobility, and literary
                legend.
              </p>
              <p>
                It is whispered that <strong>Shakespeare's</strong>
                <em>The Merry Wives of Windsor</em> may have been composed here under the patronage of
                the Neville family.
              </p>
              <p>
                In 1989, this ancient parkland was reimagined by renowned architect <strong
                  >Martin Hawtree</strong
                >, creating a course that respects the centennial woodland.
              </p>
            </div>

            <div class="mt-10">
              <a
                href="/history"
                class="inline-block border border-brand-green text-brand-green px-8 py-3 text-[10px] uppercase tracking-widest font-bold hover:bg-brand-green hover:text-white transition-all duration-300 hover:-translate-y-1 hover:shadow-lg leading-none"
              >
                Read the full story &rarr;
              </a>
            </div>
          </div>

          <div class="order-1 lg:order-2 group">
            <div
              class="relative aspect-square md:aspect-[4/3] overflow-hidden rounded-sm shadow-xl transition-all duration-1000 bg-brand-stone"
            >
              <img
                src={heritageImage}
                width="800"
                height="600"
                loading="lazy"
                decoding="async"
                alt="Historic Oak Tree at Billingbear"
                class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-[2s] ease-out group-hover:scale-105"
              />
              <div
                class="absolute inset-0 bg-brand-green/10 mix-blend-multiply group-hover:opacity-0 transition-opacity duration-1000"
              >
              </div>
            </div>
            <p class="text-right text-[10px] text-brand-dark/40 mt-2 italic">
              The ancient woodlands of Billingbear Park
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- 7. BENTO VOUCHERS SECTION (Optimización de Grid y Carga) -->
    <section
      id="vouchers"
      class="py-24 px-6 bg-white border-t border-brand-stone reveal scroll-mt-20"
    >
      <div class="max-w-7xl mx-auto">
        <div class="flex flex-col md:flex-row justify-between items-baseline mb-12 gap-4">
          <div class="max-w-2xl">
            <span class="text-brand-gold uppercase tracking-widest text-[10px] font-bold"
              >Gift Shop</span
            >
            <h3 class="font-serif text-3xl md:text-5xl text-brand-green mt-2 leading-tight italic">
              Popular Experiences
            </h3>
            <p class="text-brand-dark/60 mt-4 font-light leading-relaxed">
              Choose from our most requested gift vouchers. Perfect for birthdays, anniversaries, or
              a special thank you.
            </p>
          </div>
          <a
            href="/vouchers"
            class="bg-brand-green text-white px-8 py-3 text-[10px] font-bold uppercase tracking-[0.2em] hover:bg-brand-gold transition-all leading-none shadow-xl"
            >View all vouchers &rarr;</a
          >
        </div>

        <!-- Bento Grid de Vouchers con Aspect-Ratio fijo para evitar CLS -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 auto-rows-[350px]">
          {
            homeVouchers.map((voucher: any, index: number) => {
              const isFeatured = voucher.acf?.is_featured;
              const price = voucher.acf?.price;
              const wooId = voucher.acf?.woo_product_id;
              const isOutOfStock = !wooId;
              const cardSpan =
                index === 0 ? 'md:col-span-2 md:row-span-2' : 'md:col-span-1 md:row-span-1';

              return (
                <div
                  class={`group relative overflow-hidden rounded-sm shadow-sm hover:shadow-2xl transition-all duration-700 
                                ${cardSpan} ${!isFeatured && index % 3 === 0 ? 'bg-brand-green' : 'bg-brand-cream border border-brand-stone'}
								${isOutOfStock ? 'cursor-default' : ''}`}
                >
                  <Image
                    src={getImageUrl(voucher)}
                    alt={voucher.title.rendered}
                    width={index === 0 ? 800 : 400}
                    height={index === 0 ? 700 : 350}
                    format="webp"
                    loading="lazy"
                    sizes="(max-width: 768px) 100vw, 25vw"
                    class={`absolute inset-0 w-full h-full object-cover transition-transform duration-[1.5s] ease-out ${isOutOfStock ? 'grayscale' : 'group-hover:scale-110'}`}
                  />
                  <div
                    class={`absolute inset-0 ${index === 0 ? 'bg-brand-green/40 group-hover:bg-brand-green/60' : 'bg-black/20 group-hover:bg-black/40'} transition-colors duration-500 ${isOutOfStock ? 'opacity-60' : ''}`}
                  />

                  {isOutOfStock && (
                    <div class="absolute top-4 left-4 z-20 bg-brand-dark/90 text-white px-4 py-2 text-[9px] font-bold uppercase tracking-widest leading-none shadow-lg">
                      Currently Unavailable
                    </div>
                  )}

                  <div class="absolute inset-0 p-6 md:p-10 flex flex-col justify-between z-10">
                    <div class="flex justify-between items-start">
                      {index === 0 && !isOutOfStock && (
                        <span class="bg-white text-brand-green text-[9px] font-bold px-3 py-1 uppercase tracking-widest w-fit transform -translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 leading-none">
                          Best Seller
                        </span>
                      )}
                    </div>
                    <div
                      class={`text-white transform translate-y-2 group-hover:translate-y-0 transition-transform duration-500 ${isOutOfStock ? 'opacity-75' : ''}`}
                    >
                      <h4
                        class={`font-serif italic mb-2 leading-tight ${index === 0 ? 'text-3xl md:text-5xl' : 'text-2xl'}`}
                        set:html={voucher.title.rendered}
                      />
                      <div
                        class="text-xs md:text-sm opacity-90 mb-6 font-light line-clamp-2 max-w-sm"
                        set:html={voucher.content.rendered}
                      />
                      <div class={`flex items-stretch ${index === 0 ? 'gap-6' : 'gap-3'}`}>
                        <span
                          class={`bg-black/70 backdrop-blur-sm text-white font-bold rounded-sm shadow-lg border border-white/20 flex items-center ${index === 0 ? 'text-xl px-4 py-2.5' : 'text-base px-3 py-2'}`}
                        >
                          {price}
                        </span>
                        {wooId ? (
                          <PurchaseButton
                            client:idle
                            productId={wooId.toString()}
                            productName={voucher.title.rendered.replace(/<[^>]*>/g, '')}
                            price={price || 'N/A'}
                            className={`!bg-white !text-brand-green hover:!bg-brand-gold hover:!text-white shadow-lg whitespace-nowrap !flex !items-center !justify-center ${index === 0 ? '!px-4 !py-2.5 !text-[10px] !h-[50px]' : '!px-3 !text-[9px] !h-[40px]'}`}
                          />
                        ) : (
                          <span
                            class={`bg-white/50 text-brand-green/50 uppercase tracking-widest font-bold leading-none shadow-lg cursor-not-allowed whitespace-nowrap flex items-center ${index === 0 ? 'px-4 py-2.5 text-[10px] h-[50px]' : 'px-3 text-[9px] h-[40px]'}`}
                          >
                            Currently Unavailable
                          </span>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              );
            })
          }
        </div>
      </div>
    </section>

    <!-- 8. THE CLUBHOUSE & SOCIAL -->
    <section
      id="social"
      class="py-24 px-6 bg-brand-green text-brand-cream relative overflow-hidden reveal scroll-mt-20"
    >
      <div
        class="absolute inset-0 opacity-5 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] animate-pulse"
      >
      </div>

      <div class="max-w-7xl mx-auto relative z-10">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-16 items-center">
          <div>
            <span class="text-brand-gold uppercase tracking-widest text-[10px] font-bold"
              >Aprés Golf</span
            >
            <h2 class="font-serif text-4xl md:text-5xl mb-6 mt-2 italic leading-tight">
              The Clubhouse
            </h2>
            <p class="text-white/80 text-base md:text-lg font-light leading-relaxed mb-8">
              Looking for more than golf? Gather in the clubhouse for great food, a relaxed
              atmosphere, and a game of Shuffleboard. Perfect for families, groups, or settling a
              score after 18 holes.
            </p>

            <div class="flex flex-col sm:flex-row gap-8 mt-10">
              <div class="shuffle-trigger flex items-start gap-4 group cursor-pointer">
                <div
                  class="bg-brand-gold/20 p-3 rounded-full text-brand-gold group-hover:bg-brand-gold group-hover:text-brand-green transition-colors duration-300 shrink-0"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    ><circle cx="12" cy="12" r="10" stroke-width="2"></circle><circle
                      cx="12"
                      cy="12"
                      r="3"
                      fill="currentColor"></circle></svg
                  >
                </div>
                <div>
                  <h4
                    class="font-serif text-2xl mb-1 group-hover:text-brand-gold transition-colors italic"
                  >
                    Shuffleboard
                  </h4>
                  <p
                    class="text-[10px] text-white/60 mb-2 uppercase tracking-wide font-bold leading-none"
                  >
                    From £10 / 30 mins
                  </p>
                  <button
                    class="text-brand-gold text-[10px] font-bold uppercase tracking-widest hover:text-white transition-colors cursor-pointer border-b border-brand-gold/30 pb-0.5 leading-none mt-2"
                    >Book a Table &rarr;</button
                  >
                </div>
              </div>

              <div class="flex items-start gap-4 group cursor-pointer">
                <div
                  class="bg-brand-gold/20 p-3 rounded-full text-brand-gold group-hover:bg-brand-gold group-hover:text-brand-green transition-colors duration-300 shrink-0"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    ><path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                    ></path></svg
                  >
                </div>
                <div>
                  <h4
                    class="font-serif text-2xl mb-1 group-hover:text-brand-gold transition-colors italic"
                  >
                    The Kitchen
                  </h4>
                  <p class="text-[10px] text-white/60 mb-2 uppercase tracking-wide font-bold">
                    Famous Full English
                  </p>
                  <a
                    href="#"
                    class="text-brand-gold text-[10px] font-bold uppercase tracking-widest hover:text-white transition-colors border-b border-brand-gold/30 pb-0.5 leading-none mt-2"
                    >View Menu &rarr;</a
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="relative group">
            <img
              src={shuffleboardImage}
              width="800"
              height="500"
              loading="lazy"
              decoding="async"
              alt="Shuffleboard at Billingbear"
              class="rounded-sm shadow-2xl border-4 border-brand-gold/20 transform rotate-1 md:rotate-2 group-hover:rotate-0 transition-transform duration-700 ease-out"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- 9. EVENTS & PRIVATE HIRE -->
    <section
      id="events"
      class="py-24 px-6 bg-brand-cream border-t border-brand-stone reveal scroll-mt-20"
    >
      <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 md:gap-16 items-center">
        <div class="order-2 lg:order-1">
          <span class="text-brand-gold uppercase tracking-widest text-[10px] font-bold"
            >Venue Hire</span
          >
          <h2
            class="font-serif text-3xl md:text-5xl text-brand-green mt-2 mb-6 leading-tight italic"
          >
            Celebrate at Billingbear
          </h2>
          <p class="text-brand-dark/70 text-base md:text-lg font-light leading-relaxed mb-6">
            Billingbear Park is a fantastic venue for private functions. With no neighbours, you’re
            able to turn up the music and enjoy an evening with friends and family in beautiful
            private surroundings.
          </p>

          <ul class="space-y-4 mb-8 text-[11px] md:text-sm text-brand-dark/80">
            <li class="flex items-center gap-3">
              <svg
                class="w-5 h-5 text-brand-gold shrink-0"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                ><path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"></path></svg
              >
              <span>Capacity for up to <strong>120 guests</strong> (Clubhouse + Marquee).</span>
            </li>
            <li class="flex items-center gap-3">
              <svg
                class="w-5 h-5 text-brand-gold shrink-0"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                ><path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"></path></svg
              >
              <span>Summer canopy with patio heaters for year-round comfort.</span>
            </li>
          </ul>

          <div
            class="bg-white border-l-4 border-brand-green p-6 shadow-sm mb-8 hover:shadow-lg transition-shadow duration-300"
          >
            <h4 class="font-serif text-lg md:text-xl text-brand-green mb-2 italic">
              Golf-Themed Buffets & BBQs
            </h4>
            <p class="text-xs md:text-sm text-brand-dark/70 mb-3 italic">
              Our catering options include themed menus:
            </p>
            <div class="flex flex-wrap gap-2">
              <span
                class="bg-brand-stone/50 px-3 py-1 text-[9px] uppercase tracking-tighter rounded-full font-bold hover:bg-brand-green hover:text-white transition-colors cursor-default leading-none"
                >The Palmer</span
              >
              <span
                class="bg-brand-stone/50 px-3 py-1 text-[9px] uppercase tracking-tighter rounded-full font-bold hover:bg-brand-green hover:text-white transition-colors cursor-default leading-none"
                >The Nicklaus</span
              >
              <span
                class="bg-brand-stone/50 px-3 py-1 text-[9px] uppercase tracking-tighter rounded-full font-bold hover:bg-brand-green hover:text-white transition-colors cursor-default leading-none"
                >The Faldo Hog Roast</span
              >
            </div>
          </div>

          <div class="flex items-center gap-6">
            <span class="text-brand-green text-lg font-bold leading-none">Hire from £600</span>
            <a
              href="mailto:info@billingbearpark.com"
              class="bg-brand-green text-white px-8 py-4 text-[10px] uppercase tracking-widest font-bold hover:bg-brand-gold transition-all duration-300 hover:-translate-y-1 hover:shadow-lg leading-none"
              >Enquire Now &rarr;</a
            >
          </div>
        </div>

        <div class="order-1 lg:order-2 relative group">
          <div class="overflow-hidden rounded-sm shadow-2xl aspect-[4/5] relative bg-brand-stone">
            <img
              src={eventsImage}
              width="800"
              height="1000"
              loading="lazy"
              decoding="async"
              alt="Events at Billingbear"
              class="w-full h-full object-cover transition-transform duration-[2s] group-hover:scale-105"
            />
            <div
              class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-6 md:p-8 pt-24 text-white"
            >
              <div
                class="font-serif italic text-base md:text-lg leading-relaxed opacity-90 mb-4 transform translate-y-2 group-hover:translate-y-0 transition-transform duration-500"
              >
                “Please accept our sincere thanks for helping to make our 50th wedding anniversary a
                resounding success.”
              </div>
              <div
                class="text-[10px] font-bold uppercase tracking-widest text-brand-gold leading-none"
              >
                — Rosalind and Ted
              </div>
            </div>
          </div>
          <div
            class="absolute -z-10 top-10 -right-10 w-full h-full border-2 border-brand-gold/30 rounded-sm group-hover:translate-x-2 group-hover:translate-y-2 transition-transform duration-500 hidden md:block"
          >
          </div>
        </div>
      </div>
    </section>

    <!-- 10. FOOTER -->
    <footer class="bg-brand-dark text-brand-cream py-16 md:py-20 px-6 reveal" id="contact">
      <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-12 md:gap-16">
        <div>
          <img
            src={logoUrl}
            width="140"
            height="60"
            loading="lazy"
            alt="Billingbear Park"
            class="h-10 md:h-12 w-auto brightness-0 invert opacity-50 mb-6 hover:opacity-100 transition-opacity duration-300"
          />
          <p
            class="text-white/40 text-[10px] leading-relaxed max-w-xs font-light tracking-wide italic"
          >
            Historic golf in the heart of Berkshire. <br />Accessible to all, steeped in history.
          </p>
        </div>
        <div class="grid grid-cols-2 gap-8 col-span-2">
          <div class="space-y-4">
            <h5
              class="text-brand-gold uppercase tracking-widest text-[9px] font-bold mb-6 opacity-60"
            >
              Navigate
            </h5>
            <ul class="space-y-3 text-xs text-white/60 font-light">
              <li>
                <button
                  class="booking-trigger hover:text-brand-gold transition-colors duration-300 text-left cursor-pointer leading-none"
                  >Book Tee Time</button
                >
              </li>
              <li>
                <a href="/vouchers" class="hover:text-brand-gold transition-colors duration-300"
                  >Gift Vouchers</a
                >
              </li>
              <li>
                <button
                  class="shuffle-trigger hover:text-brand-gold transition-colors duration-300 text-left cursor-pointer leading-none"
                  >Shuffleboard</button
                >
              </li>
              <li>
                <a href="/events" class="hover:text-brand-gold transition-colors duration-300"
                  >Events & Weddings</a
                >
              </li>
              <li>
                <a href="/history" class="hover:text-brand-gold transition-colors duration-300"
                  >History</a
                >
              </li>
            </ul>
          </div>
          <div class="space-y-4">
            <h5
              class="text-brand-gold uppercase tracking-widest text-[9px] font-bold mb-6 opacity-60"
            >
              Contact
            </h5>
            <ul class="space-y-3 text-xs text-white/60 italic font-light">
              <li class="not-italic">The Straight Mile, Wokingham</li>
              <li class="not-italic">Berkshire, RG40 5SJ</li>
              <li
                class="not-italic text-white pt-4 text-base md:text-lg font-serif hover:text-brand-gold transition-colors duration-300 cursor-pointer"
              >
                +44 (0) 1344 860 860
              </li>
              <li
                class="not-italic opacity-50 hover:opacity-100 transition-opacity duration-300 cursor-pointer text-[10px]"
              >
                info@billingbearpark.com
              </li>
              <li class="not-italic pt-2">
                <a
                  href="/contact"
                  class="hover:text-brand-gold transition-colors duration-300 not-italic"
                  >Contact Us</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div
        class="max-w-7xl mx-auto mt-16 md:mt-20 pt-8 border-t border-white/5 text-[9px] uppercase tracking-[0.2em] opacity-30 text-center flex flex-col md:flex-row justify-between gap-4"
      >
        <span>© {new Date().getFullYear()} Billingbear Park</span>
        <span>Berkshire Heritage Golf</span>
      </div>
    </footer>
  </main>

  <!-- MODAL: COURSE SELECTION -->
  <div
    id="booking-modal"
    class="modal-container fixed inset-0 z-[130] hidden items-center justify-center bg-black/90 backdrop-blur-md p-4 transition-all duration-300 overflow-y-auto"
  >
    <div
      class="modal-content relative w-full max-w-4xl bg-brand-cream rounded-sm shadow-2xl overflow-hidden"
    >
      <button
        class="close-modal absolute top-4 right-4 z-10 p-2 text-brand-green hover:text-brand-gold transition-colors bg-white/50 rounded-full md:bg-transparent"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          ><path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"></path></svg
        >
      </button>
      <div class="text-center pt-10 pb-6 px-6">
        <span class="text-brand-gold uppercase tracking-widest text-[10px] font-bold leading-none"
          >Book Online</span
        >
        <h2 class="font-serif text-2xl md:text-4xl text-brand-green mt-2 leading-tight italic">
          Select Your Course
        </h2>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-1 p-1 md:p-6 md:gap-6 bg-brand-stone/30">
        <a
          href={brsOldCourse}
          target="_blank"
          rel="noopener noreferrer"
          class="group relative aspect-video md:aspect-[4/3] overflow-hidden rounded-sm cursor-pointer block bg-brand-stone"
        >
          <img
            src="https://images.pexels.com/photos/1325681/pexels-photo-1325681.jpeg?auto=compress&cs=tinysrgb&w=800"
            width="800"
            height="600"
            loading="lazy"
            decoding="async"
            class="absolute inset-0 w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-110 grayscale group-hover:grayscale-0"
            alt="Old Course"
          />
          <div
            class="absolute inset-0 bg-brand-green/40 group-hover:bg-brand-green/20 transition-colors duration-500"
          >
          </div>
          <div
            class="absolute inset-0 flex flex-col items-center justify-center text-white p-4 text-center"
          >
            <span
              class="bg-brand-gold text-brand-green text-[9px] font-bold px-3 py-1 uppercase tracking-widest mb-3 leading-none"
              >18 Holes</span
            >
            <h3 class="font-serif text-2xl md:text-4xl mb-4 md:mb-6 italic">The Old Course</h3>
            <span
              class="border border-white px-6 py-2 text-[10px] uppercase tracking-widest font-bold group-hover:bg-white group-hover:text-brand-green transition-all leading-none"
              >Book Now</span
            >
          </div>
        </a>
        <a
          href={brsNewCourse}
          target="_blank"
          rel="noopener noreferrer"
          class="group relative aspect-video md:aspect-[4/3] overflow-hidden rounded-sm cursor-pointer block bg-brand-stone"
        >
          <img
            src="https://images.pexels.com/photos/274133/pexels-photo-274133.jpeg?auto=compress&cs=tinysrgb&w=800"
            width="800"
            height="600"
            loading="lazy"
            decoding="async"
            class="absolute inset-0 w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-110 grayscale group-hover:grayscale-0"
            alt="New Course"
          />
          <div
            class="absolute inset-0 bg-brand-green/40 group-hover:bg-brand-green/20 transition-colors duration-500"
          >
          </div>
          <div
            class="absolute inset-0 flex flex-col items-center justify-center text-white p-4 text-center"
          >
            <span
              class="bg-brand-gold text-brand-green text-[9px] font-bold px-3 py-1 uppercase tracking-widest mb-3 leading-none"
              >9 Holes Par 3</span
            >
            <h3 class="font-serif text-2xl md:text-4xl mb-4 md:mb-6 italic">The New Course</h3>
            <span
              class="border border-white px-6 py-2 text-[10px] uppercase tracking-widest font-bold group-hover:bg-white group-hover:text-brand-green transition-all leading-none"
              >Book Now</span
            >
          </div>
        </a>
      </div>
      <div
        class="bg-brand-green text-white text-center py-3 text-[10px] opacity-80 font-bold tracking-tight px-4 leading-tight"
      >
        Secure booking via BRS Golf. Member bookings should use the app.
      </div>
    </div>
  </div>

  <!-- MODAL: SHUFFLEBOARD -->
  <div
    id="shuffleboard-modal"
    class="modal-container fixed inset-0 z-[130] hidden items-center justify-center bg-black/90 backdrop-blur-md p-2 md:p-4 transition-all duration-300 overflow-y-auto"
  >
    <div
      class="modal-content relative w-full max-w-5xl bg-white rounded-sm shadow-2xl overflow-hidden h-[95vh] md:h-[85vh] shuffleboard-modal-wrapper"
    >
      <button
        class="close-modal absolute top-3 right-3 z-20 p-2 text-brand-green hover:text-brand-gold transition-colors bg-white/80 rounded-full shadow-md"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 md:h-8 md:w-8"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          ><path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"></path></svg
        >
      </button>
      <div class="shuffleboard-iframe-container">
        <!-- src se asigna al abrir el modal (lazy load) para no penalizar LCP/CLS -->
        <iframe
          src="about:blank"
          data-src={shuffleBookingUrl}
          class="w-full h-full border-none shuffleboard-iframe"
          title="Shuffleboard Booking"
          allow="payment"></iframe>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="/scripts/ui.js" defer></script>
  <style>
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.98);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .animate-enter {
      animation: fadeInUp 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    .reveal {
      opacity: 0;
      transform: translateY(40px);
      transition: all 1s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }

    .modal-container {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease-in-out;
    }
    .modal-container.modal-visible {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-container.modal-closing {
      opacity: 0;
      pointer-events: none;
    }

    .modal-content {
      transform: scale(0.95) translateY(20px);
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .modal-visible .modal-content {
      transform: scale(1) translateY(0);
    }
    .modal-closing .modal-content {
      transform: scale(0.95) translateY(20px);
    }

    @media (max-width: 768px) {
      .modal-content {
        height: 98vh;
        width: 100vw;
        border-radius: 0;
      }
    }

    h1,
    h2,
    h3,
    h4 {
      text-wrap: balance;
    }

    .course-group-old:hover > div:last-child {
      max-width: 20rem;
      opacity: 1;
    }

    .course-group-new:hover > div:last-child {
      max-width: 20rem;
      opacity: 1;
    }

    .nav-course-group-old:hover > div:last-child {
      max-width: 20rem;
      opacity: 1;
    }

    .nav-course-group-new:hover > div:last-child {
      max-width: 20rem;
      opacity: 1;
    }

    @keyframes neonPulse {
      0%,
      18% {
        text-shadow: none;
        opacity: 1;
      }
      3% {
        text-shadow: 0 0 3px rgba(255, 215, 0, 0.3);
      }
      6% {
        text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
      }
      12% {
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        opacity: 1.1;
      }
      18%,
      100% {
        text-shadow: none;
        opacity: 1;
      }
    }

    .status-alert {
      animation: neonPulse 5s ease-in-out infinite;
    }

    .nav-inner {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      min-height: 80px;
    }

    #main-nav .nav-links {
      justify-self: center;
    }

    @media (max-width: 767px) {
      #top-bar {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        transform: none !important;
      }
      #main-nav.nav-mobile {
        top: 0 !important;
        padding-top: 2.5rem !important;
        padding-bottom: 0.75rem !important;
        transform: none !important;
      }
      .nav-inner {
        display: flex !important;
        justify-content: space-between !important;
        grid-template-columns: none !important;
      }
      #main-nav .nav-status,
      #main-nav .nav-shuffle,
      #main-nav .nav-links {
        display: none !important;
        opacity: 0 !important;
      }
      #main-nav.nav-mobile-scrolled {
        background-color: rgba(26, 60, 52, 0.97) !important;
        backdrop-filter: blur(8px);
      }
    }

    .shuffleboard-modal-wrapper {
      position: relative;
    }
    .shuffleboard-iframe-container {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    .shuffleboard-iframe {
      position: absolute;
      top: -70px;
      left: 0;
      width: 100%;
      height: calc(100% + 70px);
      border: none;
    }
    .shuffleboard-iframe-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 70px;
      background: #2d5016;
      z-index: 10;
      pointer-events: none;
    }
    @media (max-width: 768px) {
      .shuffleboard-iframe {
        top: -60px;
        height: calc(100% + 60px);
      }
      .shuffleboard-iframe-container::before {
        height: 60px;
      }
    }
  </style>
</Layout>
